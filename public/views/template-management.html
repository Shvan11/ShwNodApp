<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template Management - Shwan Orthodontics</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/pages/template-management.css">
    <link rel="stylesheet" href="../fontawesome/css/all.min.css">
</head>
<body>
    <div id="app">
        <header class="header">
            <div class="container">
                <div class="logo">
                    <a href="/dashboard" style="display: flex; align-items: center; text-decoration: none; color: inherit;">
                        <img src="../images/logo.png" alt="Shwan Orthodontics">
                        <h1>Shwan Orthodontics</h1>
                    </a>
                </div>
                <div class="user-info">
                    <a href="/dashboard" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> Back to Dashboard
                    </a>
                </div>
            </div>
        </header>

        <main class="main-content">
            <div class="container">
                <!-- Page Header -->
                <div class="page-header">
                    <div class="header-content">
                        <h2><i class="fas fa-file-alt"></i> Document Template Management</h2>
                        <p>Design and manage templates for receipts, invoices, prescriptions, and more</p>
                    </div>
                    <button class="btn btn-primary" id="createTemplateBtn">
                        <i class="fas fa-plus"></i> Create New Template
                    </button>
                </div>

                <!-- Statistics Overview -->
                <div class="stats-grid" id="statsGrid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalTemplates">-</h3>
                            <p>Total Templates</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon active">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="activeTemplates">-</h3>
                            <p>Active Templates</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon system">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="systemTemplates">-</h3>
                            <p>System Templates</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon usage">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="recentUsage">-</h3>
                            <p>Used Today</p>
                        </div>
                    </div>
                </div>

                <!-- Document Type Tabs -->
                <div class="tabs-container">
                    <div class="tabs" id="documentTypeTabs">
                        <!-- Tabs will be dynamically generated -->
                    </div>
                </div>

                <!-- Templates List -->
                <div class="templates-container" id="templatesContainer">
                    <!-- Loading State -->
                    <div class="loading-state" id="loadingState">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Loading templates...</p>
                    </div>

                    <!-- Empty State -->
                    <div class="empty-state" id="emptyState" style="display: none;">
                        <i class="fas fa-file-alt"></i>
                        <h3>No templates found</h3>
                        <p>Create your first template to get started</p>
                        <button class="btn btn-primary" onclick="document.getElementById('createTemplateBtn').click()">
                            <i class="fas fa-plus"></i> Create Template
                        </button>
                    </div>

                    <!-- Templates Grid -->
                    <div class="templates-grid" id="templatesGrid" style="display: none;">
                        <!-- Template cards will be dynamically generated -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Create Template Modal -->
    <div class="modal-overlay" id="createTemplateModal" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3><i class="fas fa-plus"></i> Create New Template</h3>
                <button class="modal-close" onclick="closeCreateModal()">×</button>
            </div>
            <div class="modal-body">
                <form id="createTemplateForm">
                    <div class="form-group">
                        <label for="templateName">Template Name <span class="required">*</span></label>
                        <input type="text" id="templateName" name="templateName" class="form-control" required placeholder="e.g., Standard Receipt, Detailed Invoice">
                    </div>

                    <div class="form-group">
                        <label for="documentType">Document Type <span class="required">*</span></label>
                        <select id="documentType" name="documentType" class="form-control" required>
                            <option value="">Select document type...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="templateDescription">Description</label>
                        <textarea id="templateDescription" name="templateDescription" class="form-control" rows="3" placeholder="Optional description of this template's purpose"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="paperWidth">Paper Width (mm) <span class="required">*</span></label>
                            <input type="number" id="paperWidth" name="paperWidth" class="form-control" value="80" required>
                        </div>
                        <div class="form-group">
                            <label for="paperHeight">Paper Height (mm) <span class="required">*</span></label>
                            <input type="number" id="paperHeight" name="paperHeight" class="form-control" value="297" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="paperOrientation">Orientation</label>
                        <select id="paperOrientation" name="paperOrientation" class="form-control">
                            <option value="portrait">Portrait</option>
                            <option value="landscape">Landscape</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="setAsDefault" name="setAsDefault">
                            <span>Set as default template for this document type</span>
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeCreateModal()">Cancel</button>
                <button type="submit" form="createTemplateForm" class="btn btn-primary">
                    <i class="fas fa-check"></i> Create & Open Designer
                </button>
            </div>
        </div>
    </div>

    <!-- Preview Modal -->
    <div class="modal-overlay" id="previewModal" style="display: none;">
        <div class="modal-dialog modal-large">
            <div class="modal-header">
                <h3><i class="fas fa-eye"></i> Template Preview</h3>
                <button class="modal-close" onclick="closePreviewModal()">×</button>
            </div>
            <div class="modal-body">
                <div class="preview-container" id="previewContainer">
                    <div class="preview-loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Loading preview...</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closePreviewModal()">Close</button>
                <button type="button" class="btn btn-primary" onclick="printPreview()">
                    <i class="fas fa-print"></i> Print Preview
                </button>
            </div>
        </div>
    </div>

    <script src="../js/pages/template-management.js"></script>
</body>
</html>
